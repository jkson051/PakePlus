(function(e){function t(t){for(var n,a,c=t[0],s=t[1],f=t[2],d=0,l=[];d<c.length;d++)a=c[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&l.push(o[a][0]),o[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(l.length)l.shift()();return r.push.apply(r,f||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],n=!0,a=1;a<i.length;a++){var c=i[a];0!==o[c]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=i[0]))}return e}var n={},a={app:0},o={app:0},r=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-009a31b8":"bcc1d121","chunk-0e6b0ebe":"39e2a12e","chunk-286dcb39":"e915e476","chunk-aef18f10":"1aa31fac","chunk-e6ad61d6":"11a329be"}[e]+".js"}function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.e=function(e){var t=[],i={"chunk-009a31b8":1,"chunk-0e6b0ebe":1,"chunk-286dcb39":1,"chunk-aef18f10":1,"chunk-e6ad61d6":1};a[e]?t.push(a[e]):0!==a[e]&&i[e]&&t.push(a[e]=new Promise((function(t,i){for(var n="css/"+({}[e]||e)+"."+{"chunk-009a31b8":"50ae8651","chunk-0e6b0ebe":"4e809a66","chunk-286dcb39":"407ff126","chunk-aef18f10":"a85cdfbf","chunk-e6ad61d6":"e8e7d43d"}[e]+".css",o=s.p+n,r=document.getElementsByTagName("link"),c=0;c<r.length;c++){var f=r[c],d=f.getAttribute("data-href")||f.getAttribute("href");if("stylesheet"===f.rel&&(d===n||d===o))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){f=l[c],d=f.getAttribute("data-href");if(d===n||d===o)return t()}var u=document.createElement("link");u.rel="stylesheet",u.type="text/css",u.onload=t,u.onerror=function(t){var n=t&&t.target&&t.target.src||o,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete a[e],u.parentNode.removeChild(u),i(r)},u.href=o;var g=document.getElementsByTagName("head")[0];g.appendChild(u)})).then((function(){a[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,i){n=o[e]=[t,i]}));t.push(n[2]=r);var f,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=c(e);var l=new Error;f=function(t){d.onerror=d.onload=null,clearTimeout(u);var i=o[e];if(0!==i){if(i){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",l.name="ChunkLoadError",l.type=n,l.request=a,i[1](l)}o[e]=void 0}};var u=setTimeout((function(){f({type:"timeout",target:d})}),12e4);d.onerror=d.onload=f,document.head.appendChild(d)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var f=window["webpackJsonp"]=window["webpackJsonp"]||[],d=f.push.bind(f);f.push=t,f=f.slice();for(var l=0;l<f.length;l++)t(f[l]);var u=d;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){i("56d7"),i("db4d"),e.exports=i("ecad")},"0532":function(e,t,i){},2435:function(e,t,i){},"365c":function(e,t,i){"use strict";i.d(t,"x",(function(){return d})),i.d(t,"z",(function(){return l})),i.d(t,"g",(function(){return u})),i.d(t,"G",(function(){return g})),i.d(t,"l",(function(){return m})),i.d(t,"q",(function(){return p})),i.d(t,"p",(function(){return h})),i.d(t,"M",(function(){return b})),i.d(t,"K",(function(){return _})),i.d(t,"P",(function(){return v})),i.d(t,"t",(function(){return y})),i.d(t,"d",(function(){return k})),i.d(t,"s",(function(){return w})),i.d(t,"u",(function(){return D})),i.d(t,"o",(function(){return T})),i.d(t,"L",(function(){return S})),i.d(t,"k",(function(){return O})),i.d(t,"e",(function(){return j})),i.d(t,"y",(function(){return C})),i.d(t,"h",(function(){return I})),i.d(t,"f",(function(){return x})),i.d(t,"B",(function(){return E})),i.d(t,"C",(function(){return L})),i.d(t,"E",(function(){return A})),i.d(t,"Q",(function(){return M})),i.d(t,"v",(function(){return N})),i.d(t,"i",(function(){return F})),i.d(t,"F",(function(){return P})),i.d(t,"c",(function(){return U})),i.d(t,"H",(function(){return $})),i.d(t,"I",(function(){return V})),i.d(t,"N",(function(){return J})),i.d(t,"m",(function(){return q})),i.d(t,"n",(function(){return R})),i.d(t,"b",(function(){return B})),i.d(t,"a",(function(){return G})),i.d(t,"J",(function(){return H})),i.d(t,"D",(function(){return z})),i.d(t,"w",(function(){return K})),i.d(t,"j",(function(){return Q})),i.d(t,"r",(function(){return W})),i.d(t,"O",(function(){return X})),i.d(t,"A",(function(){return Z}));i("d3b7"),i("159b"),i("b64b"),i("14d9"),i("99af"),i("a15b"),i("d9e2"),i("4328");var n=i("5c96"),a=i("bc3a"),o=i.n(a),r=window.__gconf.gatawayUrl,c=o.a.create({timeout:3e4,method:"post",withCredentials:!1});o.a.defaults.baseURL=r;var s=function(e){var t=[];return Object.keys(e).forEach((function(i){t.push("".concat(i,"=").concat(e[i]))})),t.join("&")};c.interceptors.request.use((function(e){if(e.data=e.data||{},e.data["_token"]=localStorage.getItem("token"),e.data["_agent_id"]=localStorage.getItem("agent_id")||1,"post"===e.method&&e.headers.serialize&&(e.data=s(e.data),delete e.data.serialize),"formData"==e.dataType){e.headers["Content-Type"]="multipart/form-data;";var t=new FormData;Object.keys(e.data).forEach((function(i){t.append(i,e.data[i])})),e.data=t}return e}),(function(e){return Promise.reject(e)})),c.interceptors.response.use((function(e){try{return 200===e.status?"1"==e.data.err?(n["Message"].error(e.data.msg),Promise.reject(new Error(e.data.msg||"Error"))):e.data:e}catch(t){console.log(t)}}),(function(e){return Promise.reject(e)}));var f=c;function d(e,t){return f({url:"/im/in/".concat(t?"login":"reg_tourist"),method:"post",data:e,dataType:"formData"})}function l(e){return f({url:"/im/in/reg",method:"post",data:e,dataType:"formData"})}function u(e){return f({url:"/im/App/config",method:"post",data:e,dataType:"formData"})}function g(e){return f({url:"/im/App/getSms",method:"post",data:e,dataType:"formData"})}function m(e){return f({url:"/im/get/base",method:"post",data:e,dataType:"formData"})}var p=function(e){return f({url:"/im/get/friendList",method:"post",data:e,dataType:"formData"})},h=function(e){return f({url:"/im/get/chatList",method:"post",data:e,dataType:"formData"})},b=function(e){return f({url:"/im/message/textMsg",method:"post",data:e,dataType:"formData"})},_=function(e){return f({url:"/im/message/setListTime",method:"post",data:e,dataType:"formData"})},v=function(e){return f({url:"/im/upload/chat",method:"post",data:e,dataType:"formData"})},y=function(e){return f({url:"/im/message/getListTime",method:"post",data:e,dataType:"formData"})},k=function(e){return f({url:"/im/get/chatData",method:"post",data:e,dataType:"formData"})},w=function(e){return f({url:"/im/message/getListId",method:"post",data:e,dataType:"formData"})},D=function(e){return f({url:"/im/vendor/getMemberPhotos",method:"post",data:e,dataType:"formData"})},T=function(e){return f({url:"/im/message/getChatDetails",method:"post",data:e,dataType:"formData"})},S=function(e){return f({url:"/im/friend/setRemarks",method:"post",data:e,dataType:"formData"})},O=function(e){return f({url:"/im/get/details",method:"post",data:e,dataType:"formData"})},j=function(e){return f({url:"/im/message/chatTop",method:"post",data:e,dataType:"formData"})},C=function(e){return f({url:"/im/message/msgDisturb",method:"post",data:e,dataType:"formData"})},I=function(e){return f({url:"/im/chat/deleteChat",method:"post",data:e,dataType:"formData"})},x=function(e){return f({url:"/im/upload/avatar",method:"post",data:e,dataType:"formData"})},E=function(e){return f({url:"/im/set/nickname",method:"post",data:e,dataType:"formData"})},L=function(e){return f({url:"/im/set/password",method:"post",data:e,dataType:"formData"})},A=function(e){return f({url:"/im/vendor/saveStore",method:"post",data:e,dataType:"formData"})},M=function(e){return f({url:"/im/message/withdraw",method:"post",data:e,dataType:"formData"})},N=function(e){return f({url:"/im/vendor/getUserStore",method:"post",data:e,dataType:"formData"})},F=function(e){return f({url:"/im/vendor/deleteStore",method:"post",data:e,dataType:"formData"})},P=function(e){return f({url:"/im/get/searchUser",method:"post",data:e,dataType:"formData"})},U=function(e){return f({url:"/im/get/applyFriend",method:"post",data:e,dataType:"formData"})},$=function(e){return f({url:"/im/message/sendCard",method:"post",data:e,dataType:"formData"})},V=function(e){return f({url:"/im/message/sendCardInfo",method:"post",data:e,dataType:"formData"})},J=function(e){return f({url:"/im/message/textMsgs",method:"post",data:e,dataType:"formData"})},q=function(e){return f({url:"/im/action/friendAdd",method:"post",data:e,dataType:"formData"})},R=function(e){return f({url:"/im/action/friendAddAction",method:"post",data:e,dataType:"formData"})},B=function(e){return f({url:"/im/message/addGroup",method:"post",data:e,dataType:"formData"})},G=function(e){return f({url:"im/message/addChat",method:"post",data:e,dataType:"formData"})},H=function(e){return f({url:"im/message/setGroupData",method:"post",data:e,dataType:"formData"})},z=function(e){return f({url:"im/vendor/saveGroupNickName",method:"post",data:e,dataType:"formData"})},K=function(e){return f({url:"im/message/groupIsMsg",method:"post",data:e,dataType:"formData"})},Q=function(e){return f({url:"im/vendor/editChange",method:"post",data:e,dataType:"formData"})},W=function(e){return f({url:"im/message/getGroupAdmin",method:"post",data:e,dataType:"formData"})},X=function(e){return f({url:"im/vendor/transferQun",method:"post",data:e,dataType:"formData"})},Z=function(e){return f({url:"im/message/removeChat",method:"post",data:e,dataType:"formData"})}},"485a9":function(e,t,i){"use strict";i("d266")},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var e=this,t=e._self._c;return e.showLogin?t("div",{attrs:{id:"appLogin"}},[t("router-view")],1):t("div",{attrs:{id:"app"}},[e.showSide?t("div",{staticClass:"sidebar"},[t("mycard")],1):e._e(),t("div",{staticClass:"main"},[t("router-view")],1)])},o=[],r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mycard"},[t("header",[t("el-popover",{attrs:{placement:"right",width:"300",trigger:"click"}},[t("div",{staticClass:"friendInfo"},[e.user.user_info?t("div",{staticClass:"esInfo"},[t("div",{staticClass:"left"},[t("div",{staticClass:"people"},[t("div",{staticClass:"nickname"},[e._v(e._s(e.user.user_info.nickname))]),t("div",{staticClass:"nicknameEdit",staticStyle:{padding:"5px 5px","background-color":"#007AFF",color:"#fff","border-radius":"5px",width:"70px","text-align":"center",cursor:"pointer"},on:{click:function(t){return e.editNickname()}}},[e._v(" 修改昵称")]),t("div",{class:[1===e.user.user_info.sex?"gender-male":"gender-female"]})]),t("div",{staticClass:"signature"},[e._v(e._s(e.user.user_info.signature))])]),t("div",{staticClass:"right",staticStyle:{position:"relative"}},[t("img",{staticClass:"avatar",attrs:{width:"60",height:"60",src:e.user.img}}),t("input",{staticClass:"upload-file",attrs:{id:"upload_file",type:"file",placeholder:"更换",accept:".jpeg,.jpg,.png,.gif"},on:{change:function(t){return e.fileChange(t)}}})])]):e._e(),e.user.user_info?t("div",{staticClass:"detInfo"},[t("div",{staticClass:"list_id"},[t("span",[e._v("微信号")]),t("span",[e._v(e._s(e.user.user_info.username))])])]):e._e()]),t("img",{staticClass:"avatar",attrs:{slot:"reference",src:e.user.img},slot:"reference"})])],1),t("div",{staticClass:"navbar",on:{click:e.clearSearch}},[e.unreadsum>0?t("p",{staticClass:"unread"},[e._v(e._s(e.unreadsum))]):e._e(),e.user.new_friend_tips_num>0?t("p",{staticClass:"unread newFriend"},[e._v(e._s(e.user.new_friend_tips_num))]):e._e(),t("router-link",{staticClass:"icon iconfont icon-msg",attrs:{to:"/chat"}}),t("router-link",{staticClass:"icon iconfont icon-friend",attrs:{to:"/friend"}}),t("router-link",{staticClass:"icon iconfont icon-collection",attrs:{to:"/my"}})],1),t("footer",[t("el-dropdown",{attrs:{placement:"top"},on:{command:e.handleCommand}},[t("i",{staticClass:"icon iconfont icon-more",staticStyle:{"margin-top":"0"}}),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"logout"}},[e._v("退出登录")]),t("el-dropdown-item",{attrs:{command:"reset"}},[e._v("修改密码")])],1)],1)],1),t("el-dialog",{attrs:{title:"密码修改",visible:e.dialogVisible,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{attrs:{model:e.formData}},[t("el-form-item",{attrs:{label:"输入原密码","label-width":"60"}},[t("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.formData.pass1,callback:function(t){e.$set(e.formData,"pass1",t)},expression:"formData.pass1"}})],1),t("el-form-item",{attrs:{label:"输入新密码","label-width":"60"}},[t("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.formData.pass2,callback:function(t){e.$set(e.formData,"pass2",t)},expression:"formData.pass2"}})],1),t("el-form-item",{attrs:{label:"确认新密码","label-width":"60"}},[t("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.formData.pass3,callback:function(t){e.$set(e.formData,"pass3",t)},expression:"formData.pass3"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleReset}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"昵称修改",visible:e.dialogNicknameVisible,width:"300px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogNicknameVisible=t}}},[t("el-form",{attrs:{model:e.formData2}},[t("el-form-item",{attrs:{label:"请输入昵称","label-width":"60"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.formData2.nickname,callback:function(t){e.$set(e.formData2,"nickname",t)},expression:"formData2.nickname"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogNicknameVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSaveNickname}},[e._v("确 定")])],1)],1)],1)},c=[],s=i("5530"),f=(i("14d9"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("5494"),i("2f62")),d=i("da6f"),l=i("365c"),u=i("c7eb"),g=i("1da1"),m=(i("b64b"),i("d81d"),i("e9c4"),i("4de4"),i("159b"),i("7db0"),i("b0c0"),i("caad"),i("2532"),[{path:"/",redirect:"login"},{name:"login",component:function(){return i.e("chunk-009a31b8").then(i.bind(null,"4009"))},meta:{title:"首页",showSide:!1,showLogin:!0}},{name:"reg",component:function(){return i.e("chunk-286dcb39").then(i.bind(null,"a40f"))},meta:{title:"注册",showSide:!1,showLogin:!0}},{name:"chat",component:function(){return i.e("chunk-e6ad61d6").then(i.bind(null,"4072"))},meta:{title:"聊天列表",showSide:!0,showLogin:!1}},{name:"friend",component:function(){return i.e("chunk-0e6b0ebe").then(i.bind(null,"faad"))},meta:{title:"聊天列表",showSide:!0,showLogin:!1}},{name:"my",component:function(){return i.e("chunk-aef18f10").then(i.bind(null,"2324"))},meta:{title:"收藏",showSide:!0,showLogin:!1}}]);m.forEach((function(e){e.path=e.path||"/"+(e.name||"")}));var p=m,h=i("8c4f"),b=i("2909"),_=(i("ac1f"),i("5319"),null),v=!0,y="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,k=y.replace(/hidden/i,"visibilitychange"),w=function(){document[y]?(v=!1,console.log("页面非激活")):(console.log("页面激活"),v=!0)};document.addEventListener(k,w);var D=window.__gconf,T=D.wsUrl,S=D.photoUrl,O=D.openJudge,j=function(e){var t=JSON.parse(e.data);if(console.log(t),"chatData"===t.action){if(R.state.user.name!==t.data.data.msg.user_info.name){var i=R.state.chatlist.map((function(e){return e.list_id})),n=document.getElementById("chatmp3");if(n.play(),console.log(t.data),(O&&!v||!O)&&(Notification.requestPermission(),new Notification("消息通知",{body:"你有新的消息待查看"})),i.includes(t.data.list_id)){for(var a=Object(b["a"])(R.state.chatlist),o=0;o<a.length;o++)if(R.state.selectId!==t.data.list_id&&t.data.list_id==a[o].list_id&&(a[o].unread+=1),a[o].list_id===t.data.list_id){console.log(33);var r=t.data.data;return a[o].messages.push({content:r.msg.content,date:new Date(1e3*r.msg.time),type:r.msg.content.type||r.type,msg_type:r.type,read:!1,list_id:t.data.list_id,msg_id:r.msg.id,userId:r.msg.user_info.uid,msgItem_type:r.msg.content.type||r.msg.type,self:R.state.user.uid==r.msg.user_info.uid,user_info:r.msg.user_info}),console.log(a),void R.dispatch("refreshChatlist",a)}}else R.dispatch("fetchCharList",R.state.selectId)}}else"newFriend"==t.action&&((O&&!v||!O)&&(Notification.requestPermission(),new Notification("好友申请",{body:"你有一条好友申请待查看"})),Object(l["l"])().then((function(e){var t=e.data.user_info;R.dispatch("updataUser",Object(s["a"])(Object(s["a"])({},e.data),{},{name:t.username,img:S+t.photo,uid:t.id}))})))},C=function(e){_.send(e)},I=function(){var e=localStorage.getItem("token");C(JSON.stringify({action:"checkToken",data:e})),C(JSON.stringify({action:"ping",data:e}))},x=function(){},E=function(){_=new WebSocket(T),_.onmessage=j,_.onopen=I,_.onerror=L,_.onclose=x},L=function(){E()},A=window.__gconf.photoUrl,M=h["a"].prototype.push;h["a"].prototype.push=function(e){return M.call(this,e).catch((function(e){return e}))},n["default"].use(h["a"]);var N=new h["a"]({routes:p});N.beforeEach((function(e,t,i){var n=localStorage.getItem("token");n&&!R.state.user.uid&&Object(l["l"])().then((function(e){E();var t=e.data.user_info;R.dispatch("updataUser",Object(s["a"])(Object(s["a"])({},e.data),{},{name:t.username,img:A+t.photo,uid:t.id}))})),n||"/login"==e.path||"/reg"==e.path?i():i("/login")}));var F=N,P=window.__gconf.photoUrl;n["default"].use(f["a"]);new Date;var U={searchText:"",user:{name:"ratel",img:"static/images/UserAvatar.jpg",ip:"127.0.0.1",region:"",online:0},chatlist:[],friendlist:[],emojis:[{file:"100.gif",code:"[微笑]",title:"微笑",reg:/\/::\)/g},{file:"101.gif",code:"[伤心]",title:"伤心",reg:/\/::~/g},{file:"102.gif",code:"[美女]",title:"美女",reg:/\/::B/g},{file:"103.gif",code:"[发呆]",title:"发呆",reg:/\/::\|/g},{file:"104.gif",code:"[墨镜]",title:"墨镜",reg:/[墨镜]/g},{file:"105.gif",code:"[哭]",title:"哭",reg:/\/::</g},{file:"106.gif",code:"[羞]",title:"羞",reg:/\/::\$/g},{file:"107.gif",code:"[哑]",title:"哑",reg:/\/::X/g},{file:"108.gif",code:"[睡]",title:"睡",reg:/\/::Z/g},{file:"109.gif",code:"[哭]",title:"哭",reg:/\/::'\(/g},{file:"110.gif",code:"[囧]",title:"囧",reg:/\/::-\|/g},{file:"111.gif",code:"[怒]",title:"怒",reg:/\/::@/g},{file:"112.gif",code:"[调皮]",title:"调皮",reg:/\/::P/g},{file:"113.gif",code:"[笑]",title:"笑",reg:/\/::D/g},{file:"114.gif",code:"[惊讶]",title:"惊讶",reg:/\/::O/g},{file:"115.gif",code:"[难过]",title:"难过",reg:/\/::\(/g},{file:"116.gif",code:"[酷]",title:"酷",reg:/\/::\+/g},{file:"117.gif",code:"[汗]",title:"汗",reg:/\/:--b/g},{file:"118.gif",code:"[抓狂]",title:"抓狂",reg:/\/::Q/g},{file:"119.gif",code:"[吐]",title:"吐",reg:/\/::T/g},{file:"120.gif",code:"[笑]",title:"笑",reg:/\/:,@P/g},{file:"121.gif",code:"[快乐]",title:"快乐",reg:/\/:,@-D/g},{file:"122.gif",code:"[奇]",title:"奇",reg:/\/::d/g},{file:"123.gif",code:"[傲]",title:"傲",reg:/\/:,@o/g},{file:"124.gif",code:"[饿]",title:"饿",reg:/\/::g/g},{file:"125.gif",code:"[累]",title:"累",reg:/\/:\|-\)/g},{file:"126.gif",code:"[吓]",title:"吓",reg:/\/::!/g},{file:"127.gif",code:"[汗]",title:"汗",reg:/\/::L/g},{file:"128.gif",code:"[高兴]",title:"高兴",reg:/\/::>/g},{file:"129.gif",code:"[闲]",title:"闲",reg:/\/::,@/g},{file:"130.gif",code:"[努力]",title:"努力",reg:/\/:,@f/g},{file:"131.gif",code:"[骂]",title:"骂",reg:/\/::-S/g},{file:"133.gif",code:"[秘密]",title:"秘密",reg:/\/:,@x/g},{file:"134.gif",code:"[乱]",title:"乱",reg:/\/:,@@/g},{file:"135.gif",code:"[疯]",title:"疯",reg:/\/::8/g},{file:"136.gif",code:"[哀]",title:"哀",reg:/\/:,@!/g},{file:"137.gif",code:"[鬼]",title:"鬼",reg:/\/:!!!/g},{file:"138.gif",code:"[打击]",title:"打击",reg:/\/:xx/g},{file:"139.gif",code:"[bye]",title:"bye",reg:/\/:bye/g},{file:"142.gif",code:"[鼓掌]",title:"鼓掌",reg:/\/:handclap/g},{file:"145.gif",code:"[什么]",title:"什么",reg:/\/:<@/g},{file:"147.gif",code:"[累]",title:"累",reg:/\/::-O/g},{file:"153.gif",code:"[吓]",title:"吓",reg:/\/:@x/g},{file:"155.gif",code:"[刀]",title:"刀",reg:/\/:pd/g},{file:"156.gif",code:"[水果]",title:"水果",reg:/\/:<W>/g},{file:"157.gif",code:"[酒]",title:"酒",reg:/\/:beer/g},{file:"158.gif",code:"[篮球]",title:"篮球",reg:/\/:basketb/g},{file:"159.gif",code:"[乒乓]",title:"乒乓",reg:/\/:oo/g},{file:"195.gif",code:"[跳舞]",title:"跳舞",reg:/\/:circle/g},{file:"160.gif",code:"[咖啡]",title:"咖啡",reg:/\/:coffee/g},{file:"161.gif",code:"[美食]",title:"美食",reg:/\/:coffee/g},{file:"162.gif",code:"[动物]",title:"动物",reg:/\/:coffee/g},{file:"163.gif",code:"[鲜花]",title:"鲜花",reg:/\/:coffee/g},{file:"164.gif",code:"[枯]",title:"枯",reg:/\/:coffee/g},{file:"165.gif",code:"[唇]",title:"唇",reg:/\/:coffee/g},{file:"166.gif",code:"[爱]",title:"爱",reg:/\/:coffee/g},{file:"167.gif",code:"[分手]",title:"分手",reg:/\/:coffee/g},{file:"168.gif",code:"[生日]",title:"生日",reg:/\/:coffee/g},{file:"169.gif",code:"[电]",title:"电",reg:/\/:coffee/g},{file:"170.gif",code:"[炸弹]",title:"炸弹",reg:/\/:coffee/g},{file:"171.gif",code:"[刀子]",title:"刀子",reg:/\/:coffee/g},{file:"172.gif",code:"[足球]",title:"足球",reg:/\/:coffee/g},{file:"173.gif",code:"[瓢虫]",title:"瓢虫",reg:/\/:coffee/g},{file:"174.gif",code:"[翔]",title:"翔",reg:/\/:coffee/g},{file:"175.gif",code:"[月亮]",title:"月亮",reg:/\/:coffee/g},{file:"176.gif",code:"[太阳]",title:"太阳",reg:/\/:coffee/g},{file:"177.gif",code:"[礼物]",title:"礼物",reg:/\/:coffee/g},{file:"178.gif",code:"[抱抱]",title:"抱抱",reg:/\/:coffee/g},{file:"179.gif",code:"[拇指]",title:"拇指",reg:/\/:coffee/g},{file:"180.gif",code:"[贬低]",title:"贬低",reg:/\/:coffee/g},{file:"181.gif",code:"[握手]",title:"握手",reg:/\/:coffee/g},{file:"182.gif",code:"[剪刀手]",title:"剪刀手",reg:/\/:coffee/g},{file:"183.gif",code:"[抱拳]",title:"抱拳",reg:/\/:coffee/g},{file:"184.gif",code:"[勾引]",title:"勾引",reg:/\/:coffee/g},{file:"185.gif",code:"[拳头]",title:"拳头",reg:/\/:coffee/g},{file:"186.gif",code:"[小拇指]",title:"小拇指",reg:/\/:coffee/g},{file:"187.gif",code:"[拇指八]",title:"拇指八",reg:/\/:coffee/g},{file:"188.gif",code:"[食指]",title:"食指",reg:/\/:coffee/g},{file:"189.gif",code:"[ok]",title:"ok",reg:/\/:coffee/g},{file:"190.gif",code:"[情侣]",title:"情侣",reg:/\/:coffee/g},{file:"191.gif",code:"[爱心]",title:"爱心",reg:/\/:coffee/g},{file:"192.gif",code:"[蹦哒]",title:"蹦哒",reg:/\/:coffee/g},{file:"193.gif",code:"[颤抖]",title:"颤抖",reg:/\/:coffee/g},{file:"194.gif",code:"[怄气]",title:"怄气",reg:/\/:coffee/g},{file:"195.gif",code:"[跳舞]",title:"跳舞",reg:/\/:coffee/g},{file:"196.gif",code:"[发呆]",title:"发呆",reg:/\/:coffee/g},{file:"197.gif",code:"[背着]",title:"背着",reg:/\/:coffee/g},{file:"198.gif",code:"[伸手]",title:"伸手",reg:/\/:coffee/g},{file:"199.gif",code:"[耍帅]",title:"耍帅",reg:/\/:coffee/g},{file:"200.png",code:"[微笑]",title:"微笑",reg:/\/:coffee/g},{file:"201.png",code:"[生病]",title:"生病",reg:/\/:coffee/g},{file:"202.png",code:"[哭泣]",title:"哭泣",reg:/\/:coffee/g},{file:"203.png",code:"[吐舌]",title:"吐舌",reg:/\/:coffee/g},{file:"204.png",code:"[迷糊]",title:"迷糊",reg:/\/:coffee/g},{file:"205.png",code:"[瞪眼]",title:"瞪眼",reg:/\/:coffee/g},{file:"206.png",code:"[恐怖]",title:"恐怖",reg:/\/:coffee/g},{file:"207.png",code:"[忧愁]",title:"忧愁",reg:/\/:coffee/g},{file:"208.png",code:"[眨眉]",title:"眨眉",reg:/\/:coffee/g},{file:"209.png",code:"[闭眼]",title:"闭眼",reg:/\/:coffee/g},{file:"210.png",code:"[鄙视]",title:"鄙视",reg:/\/:coffee/g},{file:"211.png",code:"[阴暗]",title:"阴暗",reg:/\/:coffee/g},{file:"212.png",code:"[小鬼]",title:"小鬼",reg:/\/:coffee/g},{file:"213.png",code:"[礼物]",title:"礼物",reg:/\/:coffee/g},{file:"214.png",code:"[拜佛]",title:"拜佛",reg:/\/:coffee/g},{file:"215.png",code:"[力量]",title:"力量",reg:/\/:coffee/g},{file:"216.png",code:"[金钱]",title:"金钱",reg:/\/:coffee/g},{file:"217.png",code:"[蛋糕]",title:"蛋糕",reg:/\/:coffee/g},{file:"218.png",code:"[彩带]",title:"彩带",reg:/\/:coffee/g},{file:"219.png",code:"[礼物]",title:"礼物",reg:/\/:coffee/g},{file:"220.gif",code:"[戳一戳]",title:"戳一戳",reg:/\/:coffee/g}],selectId:"",selectFriendId:"",unreadsum:0,chatDataTimer:null,groupChat:[],groupDetail:{}},$={SET_GROUPDETAIL:function(e,t){e.groupDetail=t},initData:function(e){var t=localStorage.getItem("vue-chat");t&&(e.chatlist=JSON.parse(t))},search:function(e,t){e.searchText=t},clearIntervalTimer:function(e){clearInterval(e.chatDataTimer)},clearSelectId:function(){U.selectId=""},selectSession:function(e,t){return Object(g["a"])(Object(u["a"])().mark((function i(){var n,a;return Object(u["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(console.log(t),n=t,a=!1,e.chatlist.map((function(e){e.list_id===t&&(e.unread=0,a=!0)})),e.selectId=n,a){i.next=9;break}return i.next=8,Object(l["M"])({list_id:n,_token:localStorage.getItem("token"),content_type:0,content:JSON.stringify({text:"你好"}),_agent_id:1}).then((function(e){F.push({path:"/chat"})}));case 8:return i.abrupt("return");case 9:return i.next=11,Object(l["d"])({list_id:n,time:0,is_up:1,_token:localStorage.getItem("token"),_agent_id:1}).then((function(t){var i=e.chatlist.filter((function(e){return e.list_id===t.data.list_id}))[0],a=[];1==t.data.type&&Object(l["o"])({list_id:n}).then((function(t){e.groupDetail=t.data})),e.user["ip"]=t.data.ip,e.user["region"]=t.data.region,e.user["online"]=t.data.online,t.data.list.map((function(i){a.push({content:i.msg.content,date:new Date(1e3*i.msg.time),type:i.msg.content&&i.msg.content.type||i.type,msg_type:t.data.type,read:!1,list_id:t.data.list_id,msg_id:i.msg.id,userId:i.msg.user_info.uid,msgItem_type:i.msg.content.type||i.msg.type,self:e.user.uid==i.msg.user_info.uid,user_info:i.msg.user_info})})),i.messages=a}));case 11:return i.next=13,Object(l["t"])({list_id:n,_token:localStorage.getItem("token"),_agent_id:1}).then((function(t){t.read_time>0?e.chatlist.forEach((function(e){e.messages.forEach((function(e,i){e.date<new Date(1e3*t.read_time)?e.read=!0:e.read=!1}))})):e.chatlist.forEach((function(e){e.messages.forEach((function(e,t){e.read=!1}))}))}));case 13:return clearInterval(e.chatDataTimer),e.chatDataTimer=setInterval((function(){Object(l["t"])({list_id:n,_token:localStorage.getItem("token"),_agent_id:1}).then((function(t){t.read_time>0?e.chatlist.forEach((function(e){e.messages.forEach((function(e,i){e.date<new Date(1e3*t.read_time)?e.read=!0:e.read=!1}))})):e.chatlist.forEach((function(e){e.messages.forEach((function(e,t){e.read=!1}))}))}))}),3e3),i.next=17,Object(l["K"])({list_id:n,_token:localStorage.getItem("token"),_agent_id:1});case 17:return e.groupChat=[],i.next=20,Object(l["u"])({list_id:n,_token:localStorage.getItem("token"),_agent_id:1}).then((function(t){t.data.length>2&&(e.groupChat=t.data)}));case 20:case"end":return i.stop()}}),i)})))()},selectFriend:function(e,t){F.push({path:"/friend"}),e.selectFriendId=t},selectFriend2:function(e,t){F.push({path:"/friend"}),Object(l["q"])({_token:localStorage.getItem("token"),_agent_id:1}).then((function(i){var n=i.data.data;Object.keys(i.data.data).forEach((function(i){n[i].data.forEach((function(i){i.user_id==t.user_id&&(e.selectFriendId=i.list_id,console.log(i.list_id))}))}))}))},sendMessage:function(e,t){var i=e.chatlist.find((function(t){return t.list_id===e.selectId}));i.messages.push({content:"string"==typeof t.content?{text:t.content}:t.content,date:new Date,type:t.type,self:!0,msgItem_type:0})},getMessage:function(e,t){},send:function(e){return Object(g["a"])(Object(u["a"])().mark((function t(){var i,n,a;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.friendlist.find((function(t){return t.id===e.selectFriendId})),n=e.chatlist.find((function(e){return e.user.name===i.remark})),a=i.list_id,n){t.next=6;break}return t.next=6,Object(l["s"])({user_id:e.selectFriendId}).then((function(e){a=e.data.list_id}));case 6:n?(a=n.list_id,e.selectId=a,F.push({path:"/chat"})):q.dispatch("selectSession",a);case 7:case"end":return t.stop()}}),t)})))()},refreshFriendlist:function(e,t){e.friendlist=t},refreshChatlist:function(e,t){t.forEach((function(e){1==e.type&&Object(l["u"])({list_id:e.list_id,_token:localStorage.getItem("token"),_agent_id:1}).then((function(t){e.groupImgs=t.data}))})),e.chatlist=t},updataUser:function(e,t){console.log(t),e.user=t}},V={searchedChatlist:function(e){var t=e.chatlist.filter((function(t){return t.user.name.includes(e.searchText)}));return t},searchedFriendlist:function(e){var t=e.friendlist.filter((function(t){return t.remark.includes(e.searchText)}));return t},selectedChat:function(e){var t=e.chatlist.find((function(t){return t.list_id===e.selectId}));return t},selectedFriend:function(e){var t=e.friendlist.find((function(t){return t.id===e.selectFriendId}));if(t)return t},messages:function(e){var t=e.chatlist.find((function(t){return t.id===e.selectId}));if(t)return t.messages}},J={search:function(e,t){var i=e.commit;setTimeout((function(){i("search",t)}),100)},selectSession:function(e,t){var i=e.commit;return i("selectSession",t)},selectFriend:function(e,t){var i=e.commit;return i("selectFriend",t)},selectFriend2:function(e,t){var i=e.commit;return i("selectFriend2",t)},sendMessage:function(e,t){var i=e.commit;return i("sendMessage",t)},send:function(e){var t=e.commit;return t("send")},initData:function(e){var t=e.commit;return t("initData")},refreshFriendlist:function(e,t){var i=e.commit;return i("refreshFriendlist",t)},refreshChatlist:function(e,t){var i=e.commit;return i("refreshChatlist",t)},updataUser:function(e,t){var i=e.commit;return i("updataUser",t)},clearIntervalTimer:function(e,t){var i=e.commit;return i("clearIntervalTimer")},fetchFriendList:function(e,t){var i=e.commit;Object(l["q"])({_token:localStorage.getItem("token"),_agent_id:1}).then((function(e){var t=e.data.data,n=[];Object.keys(e.data.data).forEach((function(e){t[e].data.forEach((function(i){n.push({id:i.user_id,list_id:i.list_id,initial:t[e].letter,img:P+i.photo,signature:"",nickname:i.name,sex:0,remark:i.name,area:""})}))})),i("refreshFriendlist",n)}))},fetchCharList:function(e,t){var i=e.commit;Object(l["p"])({_token:localStorage.getItem("token"),_agent_id:1}).then((function(e){var n=[];e.data.forEach((function(e){n.push({chat_id:e.chat_id,list_id:e.list_id,unread:e.no_reader_num,type:e.type,groupImgs:[],top:e.top,messages:[{content:e.last_msg,date:new Date(1e3*e.time),type:0,read:!1,firstShow:!0}],user:{img:P+e.photo_path,name:e.show_name}})})),i("refreshChatlist",n),t&&i("selectSession",t)}))},setGroupDetail:function(e,t){var i=e.commit;i("SET_GROUPDETAIL",t)}},q=new f["a"].Store({state:U,mutations:$,getters:V,actions:J});q.watch((function(e){return e.chatlist}),(function(e){localStorage.setItem("vue-chat",JSON.stringify(e)),U.unreadsum=0,e.forEach((function(e){U.unreadsum+=e.unread}))}),{deep:!0});var R=q,B=window.__gconf.photoUrl,G={data:function(){return{formData:{pass1:"",pass2:"",pass3:""},formData2:{nickname:""},hasToken:!1,dialogVisible:!1,dialogNicknameVisible:!1}},computed:Object(s["a"])({},Object(f["e"])(["user","unreadsum"])),mounted:function(){console.log(this.user)},methods:{clearSearch:function(){this.$store.dispatch("search","")},handleCommand:function(e){"reset"==e?this.dialogVisible=!0:(Object(d["a"])(),this.$router.push("/login"))},editNickname:function(){this.dialogNicknameVisible=!0},handleReset:function(){var e=this;!this.formData.pass1||this.formData.pass1.length<6?this.$message.error("请输入原密码,不能小于6位"):!this.formData.pass2||this.formData.pass2.length<6?this.$message.error("请输入新密码,不能小于6位"):!this.formData.pass3||this.formData.pass3.length<6?this.$message.error("请确认新密码,不能小于6位"):this.formData.pass2===this.formData.pass3?Object(l["C"])(this.formData).then((function(t){e.$message.success("已修改,请重新登陆"),setTimeout((function(){e.handleCommand()}),1e3)})):this.$message.error("两次新密码不一致")},handleSaveNickname:function(){var e=this;this.formData2.nickname?Object(l["B"])({nickname:this.formData2.nickname}).then((function(t){e.$message.success("修改成功"),Object(l["l"])().then((function(e){var t=e.data.user_info;R.dispatch("updataUser",Object(s["a"])(Object(s["a"])({},e.data),{},{name:t.username,img:B+t.photo,uid:t.id}))})),e.user.user_info.nickname=e.formData2.nickname,setTimeout((function(){e.dialogNicknameVisible=!1}),1e3)})):this.$message.error("请输入昵称")},fileChange:function(e){for(var t=this,i=e.target.files.length,n=function(){var i=window.URL||window.webkitURL,n=new Image,o=e.target.files[a];n.src=i.createObjectURL(o),n.onload=function(){console.log(o),Object(l["f"])({_token:localStorage.getItem("token"),file:o}).then((function(e){if(0==e.err){var i=e.data.save_name;t.user.img=B+i,t.user.user_info.photo=i,Object(l["l"])().then((function(e){var t=e.data.user_info;R.dispatch("updataUser",Object(s["a"])(Object(s["a"])({},e.data),{},{name:t.username,img:B+t.photo,uid:t.id}))}))}}))}},a=0;a<i;a++)n()}}},H=G,z=(i("81fc"),i("2877")),K=Object(z["a"])(H,r,c,!1,null,"ed67c5bc",null),Q=K.exports,W=(i("0fae"),i("b059"),{name:"App",components:{mycard:Q},data:function(){return{showSide:!1,showLogin:!1}},watch:{$route:function(e){this.showSide=e.meta&&e.meta.showSide,this.showLogin=e.meta&&e.meta.showLogin}},mounted:function(){Notification.requestPermission()}}),X=W,Z=(i("bb41"),i("485a9"),Object(z["a"])(X,a,o,!1,null,"49a4407c",null)),Y=Z.exports,ee=i("5c96"),te=i.n(ee),ie=i("09aa");ie["a"].config.version="2.0",ie["a"].config.key="07ba0dba8f3d54b1d0e72bbea777c1a4",ie["a"].config.plugins=["AMap.Autocomplete","AMap.PlaceSearch","AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType","AMap.PolyEditor","AMap.CircleEditor","AMap.DistrictSearch","AMap.CircleMarker","AMap.Polyline"],n["default"].use(ie["a"]),window._AMapSecurityConfig={securityJsCode:"c5274cc67670f727b397dc3b3ff8ff75"},n["default"].use(te.a),new n["default"]({router:F,store:R,el:"#app",render:function(e){return e(Y)}})},"81fc":function(e,t,i){"use strict";i("0532")},b059:function(e,t,i){},bb41:function(e,t,i){"use strict";i("2435")},d266:function(e,t,i){},da6f:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));i("53ca"),i("b0c0"),i("e9c4"),i("b64b"),i("a9e3"),i("14d9");var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;t?window.sessionStorage.clear():window.localStorage.clear()}}});
//# sourceMappingURL=app.59afeabb.js.map