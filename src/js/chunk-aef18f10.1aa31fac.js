(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aef18f10"],{"110a":function(t,e,i){"use strict";i("7ffe")},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},2324:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"collect-wrapper"},[e("div",{staticClass:"item",on:{click:function(e){return t.chg(0)}}},[t._v("全部收藏")]),e("div",{staticClass:"item",on:{click:function(e){return t.chg(4)}}},[t._v("视频")]),e("div",{staticClass:"item",on:{click:function(e){return t.chg(3)}}},[t._v("语音")]),e("div",{staticClass:"item",on:{click:function(e){return t.chg(2)}}},[t._v("图片")]),e("div",{staticClass:"item",on:{click:function(e){return t.chg(11)}}},[t._v("文件")])]),e("div",{staticClass:"collectinfo"},[e("collection",{attrs:{list:t.list,type:t.type}})],1)])},n=[],a=i("44e1"),c=(i("b0c0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-page"},[e("div",{staticClass:"col-header"},[t._v(t._s(t.getTypeTitle()))]),e("div",{staticClass:"col-list"},[t._l(t.list,(function(i,s){return e("div",{key:s,staticClass:"col-item"},[e("i",{staticClass:"el-icon-delete",attrs:{title:"点击删除收藏"},on:{click:function(e){return e.stopPropagation(),t.handleDelete(i)}}}),e("div",{staticClass:"col-item_content",attrs:{title:"点击转发收藏"},on:{click:function(e){return e.stopPropagation(),t.handleShare(i)}}},[0==i.type?e("span",[t._v(t._s(i.content.text))]):t._e(),1==i.type?e("span",[t._v(t._s(i.content.text))]):t._e(),2==i.type?e("img",{attrs:{width:"166",src:t.chatUrl+i.list_id+"/"+i.content.url,alt:""}}):t._e(),3==i.type?e("span",[e("audio",{attrs:{controls:""}},[e("source",{attrs:{src:t.chatUrl+i.list_id+"/"+i.content.url,type:"audio/ogg"}}),e("source",{attrs:{src:t.chatUrl+i.list_id+"/"+i.content.url,type:"audio/mpeg"}}),t._v(" 您的浏览器不支持 audio 元素。 ")])]):t._e(),4==i.type?e("span",[e("video",{staticStyle:{width:"100px"},attrs:{controls:""}},[e("source",{attrs:{src:t.chatUrl+i.list_id+"/"+i.content.url,type:"video/mp4"}})])]):t._e(),11==i.type?e("div",{attrs:{target:"_blank"},on:{click222222:function(e){return e.stopPropagation(),t.window.open(t.chatUrl+i.list_id+"/"+i.content.url,"_blank")}}},[e("div",{staticClass:"address-flex"},[e("div",{staticClass:"address-name"},[e("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(i.content&&i.content.name))])])])]):t._e()]),e("div",{staticClass:"col-item_com"},[e("span",{staticClass:"col-item_user"},[t._v(t._s(i.user_info.nickname))]),e("span",{staticClass:"col-item_time"},[t._v(t._s(i.time))])])])})),0==t.list.length?e("div",{staticClass:"nodata"},[t._v("没有更多收藏内容了~")]):t._e()],2),e("selectUser",{ref:"selectUser",attrs:{title:"消息转发",tip:"分别转发给"},on:{handleOk:t.handleOk}})],1)}),l=[],o=i("5530"),r=(i("a9e3"),i("a15b"),i("d81d"),i("4de4"),i("d3b7"),i("e9c4"),i("365c")),u=i("2f62"),d=i("eb30"),h=window.__gconf.chatUrl,f={components:{selectUser:d["a"]},props:{list:{type:Array,default:function(){}},type:{type:Number,default:function(){}}},data:function(){return{chatUrl:h,currentRow:{}}},methods:Object(o["a"])(Object(o["a"])({},Object(u["b"])(["fetchCharList"])),{},{getList:function(){var t=this;Object(r["v"])({type:this.type}).then((function(e){console.log(e),t.list=e.data.data}))},handleDelete:function(t){var e=this;Object(r["i"])({id:t.id}).then((function(t){e.$message.success("删除成功"),e.getList()}))},handleShare:function(t){this.currentRow=Object(o["a"])({},t),this.$refs.selectUser.open()},getTypeTitle:function(){var t="全部收藏";return 1==this.type&&(t="文字"),2==this.type&&(t="图片"),3==this.type&&(t="语音"),4==this.type&&(t="视频"),11==this.type&&(t="文件"),t},handleOk:function(t){var e=this;Object(r["N"])({list_ids:t.filter((function(t){return t.list_id})).map((function(t){return t.list_id})).join(),content_type:this.currentRow.type,current_list_id:this.currentRow.list_id,content:JSON.stringify(this.currentRow.content)}).then((function(t){e.$message.success("转发成功")}))}})},p=f,v=(i("e66e"),i("2877")),m=Object(v["a"])(p,c,l,!1,null,"179a1d22",null),_=m.exports,g={components:{collection:_,search:a["a"]},data:function(){return{list:[],type:0}},mounted:function(){this.getList()},methods:{refreshFriend:function(){},chg:function(t){this.type=t,this.getList()},getList:function(){var t=this;Object(r["v"])({type:this.type}).then((function(e){console.log(e),t.list=e.data.data}))}}},b=g,C=(i("110a"),Object(v["a"])(b,s,n,!1,null,"270ac28c",null));e["default"]=C.exports},"2ca2":function(t,e,i){},"44e1":function(t,e,i){"use strict";i("ac1f"),i("841c");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"search-wrapper"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"searchInput",attrs:{type:"text",placeholder:"搜索"},domProps:{value:t.search},on:{keyup:t.change,input:function(e){e.target.composing||(t.search=e.target.value)}}}),e("i",{directives:[{name:"show",rawName:"v-show",value:t.noText,expression:"noText"}],staticClass:"icon iconfont icon-search"}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.haveText,expression:"haveText"}],staticClass:"searchInput-delete",on:{click:t.del}})]),e("el-dropdown",{on:{command:t.handleCommand}},[e("div",{staticClass:"add-wrapper",attrs:{title:"发起群聊"}},[e("i",{staticClass:"el-icon-plus"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"a"}},[t._v("添加好友")]),e("el-dropdown-item",{attrs:{command:"b"}},[t._v("发起群聊")])],1)],1),e("el-dialog",{attrs:{title:"添加好友",visible:t.dialogVisible,width:"500px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"add-modal"},[e("el-input",{attrs:{placeholder:"请输入内容"},on:{input:t.handleSearch},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),0==t.list.length?e("el-empty",{attrs:{description:"暂无搜索结果"}}):e("div",{staticClass:"userList"},t._l(t.list,(function(i,s){return e("div",{key:s,staticClass:"user-item"},[e("img",{staticClass:"avatar",attrs:{width:"40",height:"40",src:t.photoUrl+i.photo}}),e("div",{staticClass:"user-item_name"},[t._v(t._s(i.nickname))]),e("div",{staticClass:"user-item_add",on:{click:function(e){return t.add(i)}}},[t._v("添加为好友")])])})),0)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)]),e("selectUser",{ref:"selectUser",attrs:{title:"发起群聊",tip:""},on:{handleOk:t.handleOk}})],1)},n=[],a=i("5530"),c=(i("e9c4"),i("d81d"),i("365c")),l=i("eb30"),o=i("2f62"),r=window.__gconf.photoUrl,u={components:{selectUser:l["a"]},data:function(){return{search:"",dialogVisible:!1,active:!1,input:"",list:[],photoUrl:r}},computed:Object(a["a"])(Object(a["a"])({},Object(o["e"])(["selectId"])),{},{noText:function(){return""===this.search},haveText:function(){return""!==this.search}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])(["fetchCharList"])),{},{handleOk:function(t){var e=this;Object(c["b"])({users:JSON.stringify(t.map((function(t){return t.user_id}))),list_id:0}).then((function(){e.fetchCharList(e.selectId||"")}))},handleCommand:function(t){console.log(t),"a"==t?this.handleOpen():(console.log(999),this.$refs.selectUser.open())},handleOpen:function(){this.list=[],this.input="",this.dialogVisible=!0},change:function(){this.$store.dispatch("search",this.search)},handleSearch:function(){var t=this;this.input&&Object(c["F"])({val:this.input}).then((function(e){t.list=e.data.data}))},del:function(){this.search="",this.change()},add:function(t){var e=this;this.$prompt("你需要发送验证申请,等对方通过","朋友验证",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(i){var s=i.value;Object(c["m"])({user_id:t.id,is_type:0,content:s}).then((function(t){e.$message.success("申请成功"),e.dialogVisible=!1}))}))}})},d=u,h=(i("bfef"),i("2877")),f=Object(h["a"])(d,s,n,!1,null,"5723ff74",null);e["a"]=f.exports},"6f45":function(t,e,i){},"7ffe":function(t,e,i){},"841c":function(t,e,i){"use strict";var s=i("c65b"),n=i("d784"),a=i("825a"),c=i("7234"),l=i("1d80"),o=i("129f"),r=i("577e"),u=i("dc4a"),d=i("14c3");n("search",(function(t,e,i){return[function(e){var i=l(this),n=c(e)?void 0:u(e,t);return n?s(n,e,i):new RegExp(e)[t](r(i))},function(t){var s=a(this),n=r(t),c=i(e,s,n);if(c.done)return c.value;var l=s.lastIndex;o(l,0)||(s.lastIndex=0);var u=d(s,n);return o(s.lastIndex,l)||(s.lastIndex=l),null===u?-1:u.index}]}))},adbd:function(t,e,i){"use strict";i("2ca2")},bfef:function(t,e,i){"use strict";i("ed86")},e66e:function(t,e,i){"use strict";i("6f45")},eb30:function(t,e,i){"use strict";i("ac1f"),i("841c"),i("b0c0");var s=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"600px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"select-content"},[e("div",{staticClass:"select-content-left"},[e("div",{staticClass:"select-content-header"},[e("el-input",{attrs:{placeholder:"搜索",size:"mini","prefix-icon":"el-icon-search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e("div",{staticClass:"select-content-wrapper"},t._l(t.selectList,(function(i,s){return e("div",{key:s,staticClass:"select-item",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleCheck(i)}}},[e("img",{staticClass:"avatar",attrs:{width:"40",height:"40",src:t.photoUrl+i.photo}}),e("div",{staticClass:"select-item_name"},[t._v(t._s(i.name))]),e("el-checkbox",{staticClass:"select-item_checkbox",model:{value:i.isSelect,callback:function(e){t.$set(i,"isSelect",e)},expression:"item.isSelect"}})],1)})),0)]),e("div",{staticClass:"select-content-right"},[e("div",{staticClass:"select-content-header"},[e("span",{staticClass:"flex"},[t._v(t._s(t.tip))]),e("span",[t._v(t._s(0==t.selectedList.length?"未选择聊天":"已选择".concat(t.selectedList.length,"个聊天")))])]),e("div",{staticClass:"select-content-wrapper"},t._l(t.selectedList,(function(i,s){return e("div",{key:s,staticClass:"select-item",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleCheck(i)}}},[e("img",{staticClass:"avatar",attrs:{width:"40",height:"40",src:t.photoUrl+i.photo}}),e("div",{staticClass:"select-item_name"},[t._v(t._s(i.name))]),e("i",{staticClass:"el-icon-error"})])})),0)])]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleSend}},[t._v("确 定")])],1)])},n=[],a=i("5530"),c=(i("4de4"),i("d3b7"),i("caad"),i("2532"),i("159b"),i("b64b"),i("99af"),i("d81d"),i("365c")),l=window.__gconf.photoUrl,o={props:{title:{type:String,default:""},tip:{type:String,default:""},multiple:{type:Boolean,default:!0}},data:function(){return{list:[],dialogVisible:!1,result:[],search:"",photoUrl:l}},computed:{selectList:function(){var t=this;return this.list.filter((function(e){return e.name.includes(t.search)}))},selectedList:function(){return this.list.filter((function(t){return t.isSelect}))}},created:function(){this.getList()},methods:{handleCheck:function(t){var e=this;this.default.includes(t.user_id)?this.$message.warning("该用户已被邀请"):this.multiple||this.list.every((function(e){return!(e.user_id!=t.user_id&&e.isSelect)}))?this.list.forEach((function(i,s){i.user_id==t.user_id&&e.$set(e.list[s],"isSelect",!e.list[s].isSelect)})):this.$message.warning("仅能分享单个用户")},getList:function(){var t=this;Object(c["q"])().then((function(e){var i=e.data.data,s=[];Object.keys(i).forEach((function(t){s=s.concat(i[t].data)})),t.list=s.map((function(t){return Object(a["a"])(Object(a["a"])({},t),{},{isSelect:!1})}))}))},open:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(c["q"])().then((function(i){var s=i.data.data,n=[];Object.keys(s).forEach((function(t){n=n.concat(s[t].data)})),t.list=n.map((function(t){return Object(a["a"])(Object(a["a"])({},t),{},{isSelect:!1})})),t.default=e,t.list.forEach((function(e){t.default.some((function(t){return t==e.user_id}))?e.isSelect=!0:e.isSelect=!1})),t.dialogVisible=!0}))},handleSend:function(){0!=this.selectedList.length?(this.$emit("handleOk",this.selectedList),this.dialogVisible=!1):this.$message.warning("请选择人员")}}},r=o,u=(i("adbd"),i("2877")),d=Object(u["a"])(r,s,n,!1,null,"5e63e2c2",null);e["a"]=d.exports},ed86:function(t,e,i){}}]);
//# sourceMappingURL=chunk-aef18f10.1aa31fac.js.map