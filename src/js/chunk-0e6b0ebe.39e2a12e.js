(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e6b0ebe"],{"0b7a":function(t,e,i){"use strict";i("544e")},"128d":function(t,e,i){"use strict";i("1a32")},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"1a32":function(t,e,i){},"20ef":function(t,e,i){"use strict";i("7e39")},"29d4":function(t,e,i){"use strict";i("e05b")},"2ca2":function(t,e,i){},"36d7":function(t,e,i){t.exports=i.p+"img/friend.ea51bb33.png"},"44e1":function(t,e,i){"use strict";i("ac1f"),i("841c");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"search-wrapper"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"searchInput",attrs:{type:"text",placeholder:"搜索"},domProps:{value:t.search},on:{keyup:t.change,input:function(e){e.target.composing||(t.search=e.target.value)}}}),e("i",{directives:[{name:"show",rawName:"v-show",value:t.noText,expression:"noText"}],staticClass:"icon iconfont icon-search"}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.haveText,expression:"haveText"}],staticClass:"searchInput-delete",on:{click:t.del}})]),e("el-dropdown",{on:{command:t.handleCommand}},[e("div",{staticClass:"add-wrapper",attrs:{title:"发起群聊"}},[e("i",{staticClass:"el-icon-plus"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"a"}},[t._v("添加好友")]),e("el-dropdown-item",{attrs:{command:"b"}},[t._v("发起群聊")])],1)],1),e("el-dialog",{attrs:{title:"添加好友",visible:t.dialogVisible,width:"500px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"add-modal"},[e("el-input",{attrs:{placeholder:"请输入内容"},on:{input:t.handleSearch},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),0==t.list.length?e("el-empty",{attrs:{description:"暂无搜索结果"}}):e("div",{staticClass:"userList"},t._l(t.list,(function(i,s){return e("div",{key:s,staticClass:"user-item"},[e("img",{staticClass:"avatar",attrs:{width:"40",height:"40",src:t.photoUrl+i.photo}}),e("div",{staticClass:"user-item_name"},[t._v(t._s(i.nickname))]),e("div",{staticClass:"user-item_add",on:{click:function(e){return t.add(i)}}},[t._v("添加为好友")])])})),0)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)]),e("selectUser",{ref:"selectUser",attrs:{title:"发起群聊",tip:""},on:{handleOk:t.handleOk}})],1)},n=[],a=i("5530"),c=(i("e9c4"),i("d81d"),i("365c")),l=i("eb30"),o=i("2f62"),r=window.__gconf.photoUrl,d={components:{selectUser:l["a"]},data:function(){return{search:"",dialogVisible:!1,active:!1,input:"",list:[],photoUrl:r}},computed:Object(a["a"])(Object(a["a"])({},Object(o["e"])(["selectId"])),{},{noText:function(){return""===this.search},haveText:function(){return""!==this.search}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])(["fetchCharList"])),{},{handleOk:function(t){var e=this;Object(c["b"])({users:JSON.stringify(t.map((function(t){return t.user_id}))),list_id:0}).then((function(){e.fetchCharList(e.selectId||"")}))},handleCommand:function(t){console.log(t),"a"==t?this.handleOpen():(console.log(999),this.$refs.selectUser.open())},handleOpen:function(){this.list=[],this.input="",this.dialogVisible=!0},change:function(){this.$store.dispatch("search",this.search)},handleSearch:function(){var t=this;this.input&&Object(c["F"])({val:this.input}).then((function(e){t.list=e.data.data}))},del:function(){this.search="",this.change()},add:function(t){var e=this;this.$prompt("你需要发送验证申请,等对方通过","朋友验证",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(i){var s=i.value;Object(c["m"])({user_id:t.id,is_type:0,content:s}).then((function(t){e.$message.success("申请成功"),e.dialogVisible=!1}))}))}})},u=d,h=(i("bfef"),i("2877")),f=Object(h["a"])(u,s,n,!1,null,"5723ff74",null);e["a"]=f.exports},"544e":function(t,e,i){},"5cfa":function(t,e,i){},"7e39":function(t,e,i){},"841c":function(t,e,i){"use strict";var s=i("c65b"),n=i("d784"),a=i("825a"),c=i("7234"),l=i("1d80"),o=i("129f"),r=i("577e"),d=i("dc4a"),u=i("14c3");n("search",(function(t,e,i){return[function(e){var i=l(this),n=c(e)?void 0:d(e,t);return n?s(n,e,i):new RegExp(e)[t](r(i))},function(t){var s=a(this),n=r(t),c=i(e,s,n);if(c.done)return c.value;var l=s.lastIndex;o(l,0)||(s.lastIndex=0);var d=u(s,n);return o(s.lastIndex,l)||(s.lastIndex=l),null===d?-1:d.index}]}))},9872:function(t,e,i){},adbd:function(t,e,i){"use strict";i("2ca2")},bfef:function(t,e,i){"use strict";i("ed86")},c9f9:function(t,e,i){"use strict";i("5cfa")},e05b:function(t,e,i){},eb30:function(t,e,i){"use strict";i("ac1f"),i("841c"),i("b0c0");var s=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"600px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"select-content"},[e("div",{staticClass:"select-content-left"},[e("div",{staticClass:"select-content-header"},[e("el-input",{attrs:{placeholder:"搜索",size:"mini","prefix-icon":"el-icon-search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e("div",{staticClass:"select-content-wrapper"},t._l(t.selectList,(function(i,s){return e("div",{key:s,staticClass:"select-item",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleCheck(i)}}},[e("img",{staticClass:"avatar",attrs:{width:"40",height:"40",src:t.photoUrl+i.photo}}),e("div",{staticClass:"select-item_name"},[t._v(t._s(i.name))]),e("el-checkbox",{staticClass:"select-item_checkbox",model:{value:i.isSelect,callback:function(e){t.$set(i,"isSelect",e)},expression:"item.isSelect"}})],1)})),0)]),e("div",{staticClass:"select-content-right"},[e("div",{staticClass:"select-content-header"},[e("span",{staticClass:"flex"},[t._v(t._s(t.tip))]),e("span",[t._v(t._s(0==t.selectedList.length?"未选择聊天":"已选择".concat(t.selectedList.length,"个聊天")))])]),e("div",{staticClass:"select-content-wrapper"},t._l(t.selectedList,(function(i,s){return e("div",{key:s,staticClass:"select-item",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleCheck(i)}}},[e("img",{staticClass:"avatar",attrs:{width:"40",height:"40",src:t.photoUrl+i.photo}}),e("div",{staticClass:"select-item_name"},[t._v(t._s(i.name))]),e("i",{staticClass:"el-icon-error"})])})),0)])]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleSend}},[t._v("确 定")])],1)])},n=[],a=i("5530"),c=(i("4de4"),i("d3b7"),i("caad"),i("2532"),i("159b"),i("b64b"),i("99af"),i("d81d"),i("365c")),l=window.__gconf.photoUrl,o={props:{title:{type:String,default:""},tip:{type:String,default:""},multiple:{type:Boolean,default:!0}},data:function(){return{list:[],dialogVisible:!1,result:[],search:"",photoUrl:l}},computed:{selectList:function(){var t=this;return this.list.filter((function(e){return e.name.includes(t.search)}))},selectedList:function(){return this.list.filter((function(t){return t.isSelect}))}},created:function(){this.getList()},methods:{handleCheck:function(t){var e=this;this.default.includes(t.user_id)?this.$message.warning("该用户已被邀请"):this.multiple||this.list.every((function(e){return!(e.user_id!=t.user_id&&e.isSelect)}))?this.list.forEach((function(i,s){i.user_id==t.user_id&&e.$set(e.list[s],"isSelect",!e.list[s].isSelect)})):this.$message.warning("仅能分享单个用户")},getList:function(){var t=this;Object(c["q"])().then((function(e){var i=e.data.data,s=[];Object.keys(i).forEach((function(t){s=s.concat(i[t].data)})),t.list=s.map((function(t){return Object(a["a"])(Object(a["a"])({},t),{},{isSelect:!1})}))}))},open:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(c["q"])().then((function(i){var s=i.data.data,n=[];Object.keys(s).forEach((function(t){n=n.concat(s[t].data)})),t.list=n.map((function(t){return Object(a["a"])(Object(a["a"])({},t),{},{isSelect:!1})})),t.default=e,t.list.forEach((function(e){t.default.some((function(t){return t==e.user_id}))?e.isSelect=!0:e.isSelect=!1})),t.dialogVisible=!0}))},handleSend:function(){0!=this.selectedList.length?(this.$emit("handleOk",this.selectedList),this.dialogVisible=!1):this.$message.warning("请选择人员")}}},r=o,d=(i("adbd"),i("2877")),u=Object(d["a"])(r,s,n,!1,null,"5e63e2c2",null);e["a"]=u.exports},ed86:function(t,e,i){},faad:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"friend-wrapper"},[e("search"),e("friendlist",{attrs:{type:t.type},on:{handleClick:t.handleClick}})],1),e("div",{staticClass:"friendinfo"},[1==t.type?e("applyList"):t._e(),e("info",{directives:[{name:"show",rawName:"v-show",value:2==t.type,expression:"type == 2"}]}),3==t.type?e("group",{attrs:{item:t.item}}):t._e()],1)])},n=[],a=i("44e1"),c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"friendlist"},[e("div",{staticClass:"friend-info static",class:{active:1==t.type},on:{click:t.handleShowNew}},[e("img",{staticClass:"avatar",attrs:{width:"36",height:"36",src:t.img}}),e("div",{staticClass:"remark"},[t._v("新的朋友")]),t.user.new_friend_tips_num>0?e("p",{staticClass:"newFriend"},[t._v(t._s(t.user.new_friend_tips_num))]):t._e()]),e("ul",[e("li",{staticClass:"frienditem"},[e("div",{staticClass:"list_title"},[t._v("群聊")]),t._l(t.list,(function(i,s){return e("div",{key:s,staticClass:"friend-info",class:{active:i.chat_id===t.selectId&&3==t.type},on:{click:function(e){return t.handleShowGroup(i)}}},[e("img",{staticClass:"avatar",attrs:{width:"36",height:"36",src:t.photoUrl+i.photo_path}}),e("div",{staticClass:"remark"},[t._v(t._s(i.show_name))])])}))],2)]),e("ul",t._l(t.searchedFriendlist,(function(i,s){return e("li",{key:s,staticClass:"frienditem",class:{noborder:!i.initial}},[!i.initial||0!=s&&t.searchedFriendlist[s-1].initial==i.initial?t._e():e("div",{staticClass:"list_title"},[t._v(t._s(i.initial))]),e("div",{staticClass:"friend-info",class:{active:i.id===t.selectFriendId&&2==t.type},on:{click:function(e){return t.handleSelectFriend(i.id)}}},[e("img",{staticClass:"avatar",attrs:{width:"36",height:"36",src:i.img}}),t._v(" "+t._s(i)+" "),e("div",{staticClass:"remark"},[t._v(t._s(i.remark))])])])})),0)])},l=[],o=i("5530"),r=(i("a9e3"),i("2f62")),d=i("365c"),u=i("36d7"),h=i.n(u),f=window.__gconf.photoUrl,p={props:{type:{type:Number,default:0}},computed:Object(o["a"])(Object(o["a"])({},Object(r["e"])(["selectFriendId","searchText","user"])),Object(r["c"])(["searchedFriendlist"])),data:function(){return{img:h.a,list:[],selectId:null,photoUrl:f}},mounted:function(){var t=this;this.fetchFriendList(),Object(d["p"])({type:1}).then((function(e){console.log(e),t.list=e.data}))},methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])(["selectFriend","fetchFriendList"])),{},{handleSelectFriend:function(t){this.$emit("handleClick",2),this.selectFriend(t)},handleShowNew:function(){this.$emit("handleClick",1)},handleShowGroup:function(t){this.selectId=t.chat_id,this.$emit("handleClick",3,t)}})},v=p,m=(i("fc6d"),i("2877")),_=Object(m["a"])(v,c,l,!1,null,"0d8ff177",null),b=_.exports,g=function(){var t=this,e=t._self._c;return t.info?e("div",{staticClass:"Info-wrapper"},[e("div",{staticClass:"friendInfo"},[e("div",{staticClass:"esInfo"},[e("div",{staticClass:"left"},[e("div",{staticClass:"people"},[e("div",{staticClass:"nickname"},[t._v(t._s(t.info.nickname))]),e("div",{class:[1===t.info.sex?"gender-male":"gender-female"]})]),e("div",{staticClass:"signature"},[t._v(t._s(t.info.signature))])]),e("div",{staticClass:"right"},[e("img",{staticClass:"avatar",attrs:{width:"60",height:"60",src:t.photoUrl+t.info.photo}})])]),e("div",{staticClass:"detInfo"},[e("div",{staticClass:"remark"},[e("span",[t._v("备   注")]),e("span",{staticStyle:{cursor:"pointer"},attrs:{title:"点击修改备注"},on:{click:function(e){return t.changeRemark(t.info)}}},[t._v(t._s(t.info.remark)+" ")])]),e("div",{staticClass:"area"},[e("span",[t._v("来   源")]),e("span",[t._v(t._s(t.info.from))])]),e("div",{staticClass:"list_id"},[e("span",[t._v("微信号")]),e("span",[t._v(t._s(t.info.username))])])]),e("div",{staticClass:"option"},[e("div",{staticClass:"send",on:{click:function(e){return e.stopPropagation(),t.send.apply(null,arguments)}}},[e("span",[t._v("发消息")])]),e("div",{staticClass:"send",on:{click:function(e){return e.stopPropagation(),t.handleShare.apply(null,arguments)}}},[e("span",[t._v("分享名片")])])])]),e("selectUser",{ref:"selectUser",attrs:{title:"分享名片",tip:"分别转发给",multiple:!1},on:{handleOk:t.handleOk}})],1):t._e()},C=[],w=(i("e9c4"),i("d81d"),i("eb30")),O=window.__gconf.photoUrl,k={components:{selectUser:w["a"]},data:function(){return{info:null,photoUrl:O}},computed:Object(o["a"])({},Object(r["c"])(["selectedFriend"])),watch:{selectedFriend:function(t){this.fetchInfo()}},methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])(["selectSession","fetchFriendList"])),{},{handleOk:function(t){var e=this;Object(d["I"])({users:JSON.stringify(t.map((function(t){return t.user_id}))),toUser:this.info.user_id}).then((function(t){e.$message.success("发送成功")}))},fetchInfo:function(){var t=this;Object(d["k"])({user_id:this.selectedFriend.id,in:0}).then((function(e){t.info=Object(o["a"])(Object(o["a"])({},t.selectedFriend),e.data)}))},send:function(){this.$store.dispatch("send"),this.$store.dispatch("search","")},handleShare:function(){this.$refs.selectUser.open()},changeRemark:function(t){var e=this;this.$prompt("请输入备注信息","",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputValue:t.remark,inputErrorMessage:"备注信息不能为空"}).then((function(i){var s=i.value;Object(d["L"])({content:s,user_id:t.id}).then((function(t){e.fetchFriendList()}))})).catch((function(){})),console.log(t)}})},j=k,y=(i("0b7a"),Object(m["a"])(j,g,C,!1,null,"683896d0",null)),x=y.exports,S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-page"},[e("div",{staticClass:"col-header"},[t._v("新的朋友")]),e("div",{staticClass:"col-list"},t._l(t.list,(function(i,s){return e("div",{key:s,staticClass:"col-item"},[e("img",{staticClass:"avatar",attrs:{width:"50",height:"50",src:t.photoUrl+i.photo}}),e("div",{staticClass:"col-item_content"},[e("div",{staticClass:"col-item_name"},[t._v(t._s(i.nickname))]),e("div",{staticClass:"col-item_desc"},[t._v(t._s(i.content)+" ")])]),"已添加"!=i.text?e("div",{staticClass:"col-item_add",on:{click:function(e){return t.add(i)}}},[t._v("同意")]):e("div",{staticClass:"col-item_added"},[t._v("已添加")])])})),0)])},U=[],L=window.__gconf.photoUrl,$={data:function(){return{list:[],photoUrl:L}},created:function(){this.getList()},methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])(["fetchFriendList"])),{},{getList:function(){var t=this;Object(d["c"])().then((function(e){t.list=e.data,t.$store.dispatch("updataUser",Object(o["a"])(Object(o["a"])({},t.$store.state.user),{},{new_friend_tips_num:0}))}))},add:function(t){var e=this;Object(d["n"])({apply_id:t.id}).then((function(t){e.$message.success("添加成功"),e.getList(),e.fetchFriendList()}))}})},F=$,I=(i("29d4"),Object(m["a"])(F,S,U,!1,null,"7ef4a328",null)),V=I.exports,T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-page"},[e("div",{staticClass:"col-header"},[t._v("群聊")]),e("div",{staticClass:"col-list"},[t.info?t._l(t.info.member,(function(i,s){return e("div",{key:s,staticClass:"col-item"},[e("img",{staticClass:"avatar",attrs:{width:"50",height:"50",src:t.photoUrl+i.photo}}),e("div",{staticClass:"col-item_name"},[t._v(t._s(i.show_name))])])})):t._e()],2),e("div",{staticClass:"option"},[e("div",{staticClass:"send",on:{click:function(e){return e.stopPropagation(),t.send.apply(null,arguments)}}},[e("span",[t._v("发消息")])])])])},N=[],P=(i("14d9"),window.__gconf.photoUrl),E={props:{item:{type:Object,default:function(){}}},data:function(){return{photoUrl:P,info:null}},watch:{"item.list_id":{handler:function(t){var e=this;Object(d["o"])({list_id:this.item.list_id}).then((function(t){e.info=t.data}))}}},created:function(){var t=this;Object(d["o"])({list_id:this.item.list_id}).then((function(e){console.log(e),t.info=e.data}))},computed:{},methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])(["selectSession"])),{},{send:function(){this.selectSession(this.info.group.list_id),this.$router.push({path:"/chat"})}})},B=E,J=(i("128d"),i("c9f9"),Object(m["a"])(B,T,N,!1,null,"298ffa43",null)),R=J.exports,q={components:{search:a["a"],friendlist:b,info:x,group:R,applyList:V},data:function(){return{type:0,item:null}},methods:{handleClick:function(t,e){this.type=t,3==t&&(this.item=e)}}},D=q,G=(i("20ef"),Object(m["a"])(D,s,n,!1,null,"40dbc697",null));e["default"]=G.exports},fc6d:function(t,e,i){"use strict";i("9872")}}]);
//# sourceMappingURL=chunk-0e6b0ebe.39e2a12e.js.map