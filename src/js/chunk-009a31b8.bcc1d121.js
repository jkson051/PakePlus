(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-009a31b8"],{4009:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-box flex-c flex-jc-c",staticStyle:{height:"100vh"}},[t("div",{staticClass:"flex-r flex-jc-c",staticStyle:{position:"absolute",width:"100%"}},[t("div",{staticClass:"flex-r flex-jc-r flex-ai-c box-s brd-24"},[e._m(0),t("div",{staticClass:"model-box flex-c flex-jc-sb"},[t("div",[t("div",{staticClass:"h-px-140 flex-c flex-jc-c",staticStyle:{"text-align":"center"}},[t("div",[t("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:"static/img/logo-xiao.png"}})],1)]),t("div",{staticClass:"p-20 h-px-460"},["model-denglu"==e.modelactive?t("SignInRight",{scopedSlots:e._u([{key:"cut",fn:function(){return[t("div",{staticClass:"f-12"},[t("span",[e._v("没有账号，准备创建一个账号么？")]),t("span",{staticClass:"model-button-a",on:{click:function(t){e.modelactive="model-zhuce"}}},[e._v("立即注册")])])]},proxy:!0}],null,!1,3142508535)}):t("RegisterRight",{on:{success:e.successEvent},scopedSlots:e._u([{key:"cut",fn:function(){return[t("div",{staticClass:"f-12"},[t("span",[e._v("想起来了，已经创建过账号？")]),t("span",{staticClass:"model-button-a",on:{click:function(t){e.modelactive="model-denglu"}}},[e._v("直接登录")])])]},proxy:!0}])})],1)]),t("div",{staticClass:"m-b-12"},[t("div",{staticClass:"text-center c-white f-12"},[t("Footer")],1)])])])])])},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-white flex-r flex-jc-sb flex-ai-c login-bg-card"},[t("div",{staticClass:"image-box login-bg-card c-white text-left"},[t("div",{staticClass:"c-white p-40 m-t-480"},[t("div",{staticClass:"f-32 f-b l-h-48"},[t("span",[e._v("欢迎访问~")])]),t("div",{staticClass:"f-16 l-h-32"},[t("span",[e._v("花谢花开，季节变换，云卷云舒")])])])])])}],n=s("c7eb"),a=s("1da1"),o=(s("14d9"),s("ac1f"),s("00b4"),s("365c")),c=function(){var e=this,t=e._self._c;return t("div",{staticClass:"c-white"},[t("h1",{staticStyle:{"text-align":"center","font-size":"26px"}},[e._v("创建一个账号")]),t("div",{staticClass:"m-t-10 m-l-60 m-r-60",staticStyle:{"margin-top":"5px"}},[t("el-form",{ref:"form",staticClass:"form-box",attrs:{model:e.form,rules:e.rules,"label-width":"50px","label-position":"top"}},[t("el-form-item",{attrs:{label:"账号",size:"large",prop:"username"}},[t("el-input",{attrs:{size:"large",maxlength:"20",clearable:"",placeholder:"请输入账号/手机号"},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("i",{staticClass:"el-icon-user"})]},proxy:!0}]),model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"昵称",size:"large",prop:"nickname"}},[t("el-input",{attrs:{size:"large",maxlength:"20",clearable:"",placeholder:"请输入昵称"},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("i",{staticClass:"el-icon-user"})]},proxy:!0}]),model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),1==e.config.user_regiter_sms_status?t("el-form-item",{attrs:{label:"验证码",size:"large",prop:"sms_code"}},[t("el-input",{staticStyle:{width:"50%"},attrs:{size:"large",maxlength:"6",clearable:"",placeholder:"请输入验证码"},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("i",{staticClass:"el-icon-user"})]},proxy:!0}],null,!1,2839267332),model:{value:e.form.sms_code,callback:function(t){e.$set(e.form,"sms_code",t)},expression:"form.sms_code"}}),t("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return t.preventDefault(),e.sendSms()}}},[e._v(e._s(e.sendText))])],1):e._e(),1==e.config.user_regiter_invite_code?t("el-form-item",{attrs:{label:"邀请码",size:"large",prop:"invite_code"}},[t("el-input",{attrs:{size:"large",maxlength:"20",clearable:"",placeholder:"请输入邀请码"},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("i",{staticClass:"el-icon-user"})]},proxy:!0}],null,!1,2839267332),model:{value:e.form.invite_code,callback:function(t){e.$set(e.form,"invite_code",t)},expression:"form.invite_code"}})],1):e._e(),t("el-form-item",{attrs:{label:"密码",size:"large",prop:"password"}},[t("el-input",{attrs:{size:"large",maxlength:"20",type:"password","show-password":"",clearable:"",placeholder:"请输入密码"},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("i",{staticClass:"el-icon-lock"})]},proxy:!0}]),model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",{attrs:{label:"确认密码",size:"large",prop:"ck_pass"}},[t("el-input",{attrs:{size:"large",maxlength:"20",type:"password","show-password":"",clearable:"",placeholder:"请确认密码"},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("i",{staticClass:"el-icon-lock"})]},proxy:!0}]),model:{value:e.form.ck_pass,callback:function(t){e.$set(e.form,"ck_pass",t)},expression:"form.ck_pass"}})],1),t("el-form-item",[e._t("cut")],2),t("el-form-item",[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"warning",size:"large"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("注册")])],1)],1)],1)])},l=[],u=(s("d9e2"),{name:"RegisterRight",data:function(){return{config:{},sendText:"发送短信",time:60,form:{username:"",nickname:"",password:"",client_id:"",invite_code:"",sms_code:"",mobileCode:1,type:"REGISTER",ck_pass:""},rules:{username:[{required:!0,message:"账号不能为空",trigger:"change"}],nickname:[{required:!0,message:"昵称不能为空",trigger:"change"}],password:[{required:!0,message:"密码不能为空",trigger:"change"}],ck_pass:[{required:!0,validator:this.validatePass2,trigger:"change"}]}}},created:function(){var e=this;Object(o["g"])({}).then((function(t){e.config=t.data})).catch((function(e){}))},methods:{validatePass2:function(e,t,s){""===t?s(new Error("确认密码不能为空")):t!==this.form.password?s(new Error("2次输入的密码不同！请重新输入")):s()},sendSms:function(){var e=this;return Object(a["a"])(Object(n["a"])().mark((function t(){var s,r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e,""!=e.form.username){t.next=6;break}return e.$message.error("请输入正确格式的手机号"),t.abrupt("return",!1);case 6:if(!(e.time>=60)){t.next=13;break}return t.next=9,Object(o["G"])({mobile:e.form.username,type:e.form.type});case 9:r=t.sent,0==r.err?(s=setInterval((function(){e.time--,e.sendText=e.time+"秒",e.time<=0&&(clearInterval(s),e.sendText="发送短信",e.time=60)}),1e3),e.$message.success(r.msg)):e.$message.error(r.msg),t.next=14;break;case 13:e.$message.error("倒计时结束后再发送");case 14:case"end":return t.stop()}}),t)})))()},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){return!!e&&(1==t.config.user_regiter_sms_status&&""==t.form.sms_code?(t.$message.error("请输入验证码"),!1):(t.form.client_id=localStorage.getItem("client_id"),void Object(o["z"])(t.form,!0).then((function(e){t.loading=!1,window.localStorage.setItem("token",e.data.token),t.$router.push({path:"/chat"}),t.$forceUpdate()})).catch((function(e){t.loading=!1}))))}))}}}),m=u,f=(s("f261"),s("2877")),d=Object(f["a"])(m,c,l,!1,null,"510ed23b",null),p=d.exports,g=function(){var e=this;e._self._c;return e._m(0)},h=[function(){var e=this,t=e._self._c;return t("div",[t("span",[e._v("©2024 Copyright© ALL Rights Reserved")])])}],x={name:"Footer"},b=x,v=Object(f["a"])(b,g,h,!1,null,null,null),_=v.exports,w=function(){var e=this,t=e._self._c;return t("div",{staticClass:"c-white"},[t("h1",{staticStyle:{"text-align":"center","font-size":"26px"}},[e._v("立即登录")]),t("div",{staticClass:"m-t-48 m-l-60 m-r-60"},[t("el-form",{ref:"form",staticClass:"form-box",attrs:{model:e.form,rules:e.rules,"label-width":"50px","label-position":"top"}},[t("el-form-item",{attrs:{label:"账号",size:"large",prop:"username"}},[t("el-input",{attrs:{size:"large",maxlength:"20",clearable:"",placeholder:"请输入账号/手机号"},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("i",{staticClass:"el-icon-user"})]},proxy:!0}]),model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"密码",size:"large",prop:"password"}},[t("el-input",{attrs:{size:"large",maxlength:"20",type:"password","show-password":"",clearable:"",placeholder:"请输入密码"},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("i",{staticClass:"el-icon-lock"})]},proxy:!0}]),model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",[e._t("cut")],2),t("el-form-item",[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"warning",size:"large"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("登录")])],1)],1)],1)])},k=[],y={name:"SignInRight",data:function(){return{form:{username:"",password:"",client_id:""},rules:{username:[{required:!0,message:"账号不能为空",trigger:"change"}],password:[{required:!0,message:"密码不能为空",trigger:"change"}]}}},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.form.client_id=localStorage.getItem("client_id"),Object(o["x"])(t.form,!0).then((function(e){t.loading=!1,window.localStorage.setItem("token",e.data.token),t.$router.push({path:"/chat"}),t.$forceUpdate()})).catch((function(e){t.loading=!1}))}))}}},S=y,C=(s("9a4f"),Object(f["a"])(S,w,k,!1,null,"2bb8bd1b",null)),$=C.exports,j={components:{RegisterRight:p,SignInRight:$,Footer:_},data:function(){return{isLogin:!0,emailError:!1,passwordError:!1,existed:!1,sendText:"发送短信",form:{username:"",password:"",client_id:""},config:{},time:60,reg:{username:"",password:"",client_id:"",invite_code:"",sms_code:"",mobileCode:1,type:"REGISTER"},loading:!1,modelactive:"model-denglu"}},computed:{checkIn:function(){return""!=this.form.password&&""!=this.form.username&&this.form.password.length>5},checkReg:function(){return""!=this.reg.password&&""!=this.reg.username&&this.reg.password.length>5}},created:function(){var e=this;Object(o["g"])({}).then((function(t){e.config=t.data})).catch((function(e){}))},methods:{changeType:function(){this.isLogin=!this.isLogin,this.form.username="",this.form.password="",this.form.client_id="",this.reg.username="",this.reg.password="",this.reg.client_id="",this.reg.invite_code="",this.reg.sms_code=""},handleLogin:function(){if(!this.checkIn)return this.$message.error("请输入正确格式的账号密码"),!1;this.loading=!0,this.fetchLogin(!0)},successEvent:function(){this.modelactive="model-denglu"},fetchLogin:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.form.client_id=localStorage.getItem("client_id"),console.log(t),Object(o["x"])(t?this.form:{username:"",password:"",client_id:""},t).then((function(t){e.loading=!1,window.localStorage.setItem("token",t.data.token),e.$router.push({path:"/chat"}),e.$forceUpdate()})).catch((function(t){e.loading=!1}))},sendSms:function(){var e=this;return Object(a["a"])(Object(n["a"])().mark((function t(){var s,r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e,""!=e.reg.username){t.next=6;break}return e.$message.error("请输入正确格式的手机号"),t.abrupt("return",!1);case 6:if(!(e.time>=60)){t.next=13;break}return t.next=9,Object(o["G"])({mobile:e.reg.username,type:e.reg.type});case 9:r=t.sent,0==r.err?(s=setInterval((function(){e.time--,e.sendText=e.time+"秒",e.time<=0&&(clearInterval(s),e.sendText="发送短信",e.time=60)}),1e3),e.$message.success(r.msg)):e.$message.error(r.msg),t.next=14;break;case 13:e.$message.error("倒计时结束后再发送");case 14:case"end":return t.stop()}}),t)})))()},register:function(){if(!this.checkReg)return this.$message.error("请输入正确格式的账号密码"),!1;/^\w{1,20}$/.test(this.reg.password)?(this.loading=!0,this.fetchRetister(!0)):this.$message.error("密码只能包括下划线、数字、字母,长度6-20位")},fetchRetister:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.reg.client_id=localStorage.getItem("client_id"),console.log(t),Object(o["z"])(this.reg,t).then((function(t){e.loading=!1,window.localStorage.setItem("token",t.data.token),e.$router.push({path:"/chat"}),e.$forceUpdate()})).catch((function(t){e.loading=!1}))}}},z=j,I=(s("5d87"),Object(f["a"])(z,r,i,!1,null,"7af6cd75",null));t["default"]=I.exports},4297:function(e,t,s){},"5d87":function(e,t,s){"use strict";s("4297")},"76ed":function(e,t,s){},"9a4f":function(e,t,s){"use strict";s("76ed")},e717:function(e,t,s){},f261:function(e,t,s){"use strict";s("e717")}}]);
//# sourceMappingURL=chunk-009a31b8.bcc1d121.js.map